<!doctype html>
<html dir="ltr" lang="en">
<head>
	<title></title>
   <meta charset="utf-8">
   <meta name="author" content="Mark McDonnell" />
   <link rel="stylesheet" href="Page.css" />
</head>
<body>
	<!-- ELEMENTS FOR TESTING ANIMATION -->
	<div id="anim1">test1</div>
   <div id="anim2">test2</div>
   
	<div id="test">
		<p class="one intro">Paragraph one</p>
		<p class="two test">Paragraph two</p>
		<p class="three">Paragraph three</p>
		<p class="four test">Paragraph four</p>
	</div>
	<script src="Sizzle.js"></script>
	<script src="Standardizer.js"></script>
   <script type="text/javascript">
   	function time() {
   		console.log('Time is: ' + new Date());
   	}
   	
		st.load(time);
		
		st.ajax({
			url: 'Standardizer.js',

			onError: function(message) {
				console.log('ERROR!\n\n' + message + '\n');
			},
			
			onSuccess: function(response) {
				console.log(response.substring(0, 20) + '... this is a shortened response');
			},
		
			onComplete: function() {
				console.log('This will run regardless of whether the request was successful or not');
			}
		});
		
		window.onload = function() {
			
			console.log('Window onLoad Event: ');
			time();
			
			// Example of utilising jQuery's Sizzle CSS Selector Engine
			var elem = st.find('.test');
			for (var i = 0, len = elem.length; i < len; i++) {
				elem[i].style.border = '1px solid red';
			}
			
			// Event Management
			var div = document.getElementById('test');
			var myFunc = function(e) {
				console.log(e); // standardised event object
				
				// Now remove the event listener after one click
				st.events.remove(div, 'click', myFunc);
			};
			st.events.add(div, 'click', myFunc);
			
			// Animation Example						
			st.anim('anim1', 'color:#fff; opacity:1;', { duration: 1000 });
			st.anim('anim2', 'left:500px;', { 
				duration: 2000, 
				easing: 'bounce', 
				after: function() {
					console.log('animation finished');
					
					var el = document.getElementById('anim1');
					st.anim(el, 'left:500px'); // you can specify a string or an element node
				}
			});
						
		};
		
// Publish/Subscribe Example
		
		/**
		* Ticker is a class periodically sending out dummy tick events
		*/
		var Ticker = function (interval) {
			var self	= this;
			window.setInterval(function() {
				self.trigger('tick', new Date());
			}, 5000);
		};
		
		/**
		 * Make Ticker support event emitter methods
		 */
		st.observe.mixin(Ticker);

		// Create a new instance of Ticker
		var ticker = new Ticker();
		
		// Now bind the custom 'tick' event
		ticker.bind('tick', function(date) {
			// display to check
			console.log('Notified data: ' + date);
		});
		
// Bind Utility

		// Manipulate explicit "this"
		var x = 9, 
		    module = {
		    	getX: function() { 
		      	console.log(this.x); 
		      },
		    	x: 81
		    };
		
		
		// "module.getX()" called, "module" is "this", "module.x" is returned
		module.getX();
		// > 81  
		
		// store a reference in the global "this"
		var getX = module.getX;
		
		// "getX()" called, "this" is global, "x" is returned
		getX();
		// > 9
		
		// store a reference with "module" bound as "this"
		var boundGetX = getX.bind(module);
		
		// "boundGetX()" called, "module" is "this" again, "module.x" is returned
		boundGetX();
		// > 81
   </script>
</body>
</html>